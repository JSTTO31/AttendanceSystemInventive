import{d as j,m as $,h as D,a7 as M,r as v,s as K,a6 as q,Q as O,j as B,I as E,U as L,o as c,p as Q,w as l,a as e,e as d,t as n,b as s,a0 as G,u as o,q as H,c as _,f as J,F as W,V as F}from"./index-1b2f18c0.js";import{C as X}from"./ChartBar-89066388.js";import{V as Y}from"./VContainer-45cc6a4e.js";import{V as g,a as R}from"./VRow-bf742394.js";import{V,a as Z,b as ee,t as te}from"./VCard-81742aa1.js";import{V as ae}from"./VProgressCircular-a7f3ca87.js";import{V as se}from"./VTextField-8abd2aa7.js";import{V as p}from"./VSpacer-58a18ea2.js";import{V as A}from"./VBtn-5eaa95be.js";import{V as le,a as y}from"./VTabs-96374787.js";import{V as oe}from"./VDivider-04be6cf6.js";import{V as re,a as ne}from"./VTable-b15a121d.js";import{V as ie}from"./VFooter-9176dff8.js";import"./index-100a9889.js";import"./index-45aa9782.js";import"./VInput-c0b26070.js";import"./forwardRefs-9d31fcaa.js";import"./layout-717a0719.js";const de=s("div",{class:"px-5 mt-5 text-center"},[s("h2",{class:"font-weight-medium"},"Remaining Students"),s("h3",{class:"font-weight-light"},"All students remaining")],-1),ue={class:"d-flex pa-5 pb-2"},ce={class:"d-flex pr-5 align-center"},pe={class:"text-caption d-none d-md-block"},me=["onClick"],fe={class:"py-2"},_e={class:"d-flex"},he={class:"d-flex flex-column ml-2 text-capitalize"},xe={class:"text-caption text-grey-darken-1"},ve={class:"text-center text-caption py-4"},ge={class:"text-center py-4"},Ve={class:"d-flex flex-column ml-2 text-capitalize"},ye={class:"text-caption"},be={class:"text-caption py-2 text-center text-capitalize"},Ce={class:"text-caption py-2 text-center"},ke={key:0,class:"h-100 d-flex align-center justify-center"},ze={key:1,class:"d-flex pa-2 px-5 align-center justify-between"},we={class:"text-caption"},Se={class:"text-caption"},Ge=j({__name:"Index",setup(Te){var T;const{name:b}=$(),{mobile:C}=$(),m=D(),k=M(),z=v(k.query.filter||""),{students:f,pageOptions:i,total_remaining_students:I,total_students:N}=K(q()),P=q(),u=v(parseInt(((T=k.query.page)==null?void 0:T.toString())||"1")),w=v(""),{current:h}=O(),U=B(()=>({labels:f.value.map(r=>r.first_name.length>10?r.first_name.substring(0,10)+"...":r.first_name),datasets:[{data:f.value.map(r=>{var a;return((a=r.work_time_total)==null?void 0:a.toFixed(0))||0}),backgroundColor:[h.value.colors.primary,h.value.colors.primary,h.value.colors.primary],borderRadius:5,barThickness:C.value?35:65}]})),S=B(()=>Math.abs(100-N.value/I.value*100).toFixed(0));return E(()=>u.value,()=>{m.push({query:{page:u.value}})}),L((r,a,t)=>{const x=r.fullPath.match(/\?.*/gi);if(x){P.getAll(x[0]).then(()=>t());return}return t()}),(r,a)=>(c(),Q(Y,{class:"px-md-8 px-2 h-100 d-flex flex-column"},{default:l(()=>[e(R,null,{default:l(()=>[e(g,{cols:"12",md:"4"},{default:l(()=>[e(V,{class:"h-100 py-10 d-flex flex-column justify-center align-center pa-5 rounded-lg border",flat:""},{default:l(()=>[e(ae,{"model-value":S.value,size:"195",width:"10",class:"text-h2",color:"primary"},{default:l(()=>[d(n(S.value)+"%",1)]),_:1},8,["model-value"]),de]),_:1})]),_:1}),e(g,{cols:"12",md:"8"},{default:l(()=>[e(V,{class:"rounded-lg border pa-5",flat:""},{default:l(()=>[e(X,{"chart-data":U.value},null,8,["chart-data"])]),_:1})]),_:1})]),_:1}),e(R,{class:"h-100"},{default:l(()=>[e(g,{cols:"12"},{default:l(()=>[e(V,{class:"d-flex pb-5 flex-column rounded-lg border h-100",flat:""},{default:l(()=>[s("div",ue,[s("div",{class:G(["font-weight-medium text-h6 d-flex align-center",o(b)=="xs"||o(b)=="sm"?"w-100":"w-33"])},[e(se,{flat:"","prepend-inner-icon":"mdi-magnify",modelValue:w.value,"onUpdate:modelValue":a[0]||(a[0]=t=>w.value=t),label:"Find students...",variant:"outlined","single-line":"",density:"compact","hide-details":"",onKeyup:a[1]||(a[1]=H(t=>r.$router.push({query:{search:t.target.value}}),["enter"]))},null,8,["modelValue"])],2),e(p,{class:"d-none d-md-block d-flex"}),e(A,{"prepend-icon":"mdi-plus",color:"primary",class:"text-capitalize d-none d-md-flex",onClick:a[2]||(a[2]=t=>r.$router.push({name:"CreateStudent"})),flat:""},{default:l(()=>[d("Add Student")]),_:1})]),s("div",ce,[e(le,{modelValue:z.value,"onUpdate:modelValue":a[6]||(a[6]=t=>z.value=t),color:"primary",class:"mt-2 mt-md-0"},{default:l(()=>[e(y,{size:"small",class:"text-capitalize",value:"",onClick:a[3]||(a[3]=t=>o(m).push({query:{filter:""}}))},{default:l(()=>[d("Ongoing")]),_:1}),e(y,{size:"small",class:"text-capitalize",value:"completed",onClick:a[4]||(a[4]=t=>o(m).push({query:{filter:"completed"}}))},{default:l(()=>[d("Completed")]),_:1}),e(y,{size:"small",class:"text-capitalize",value:"all_students",onClick:a[5]||(a[5]=t=>o(m).push({query:{filter:"all_students"}}))},{default:l(()=>[d("All students")]),_:1})]),_:1},8,["modelValue"]),e(p),s("span",pe,"Total of studens ("+n(o(i).total)+")",1)]),e(oe),e(re,{style:{"border-collapse":"collapse"},striped:"",hover:""},{default:l(()=>[s("tbody",null,[(c(!0),_(W,null,J(o(f),t=>(c(),_("tr",{style:{cursor:"pointer"},key:t.id,class:"border-b",onClick:x=>r.$router.push({name:"ShowStudent",params:{student_id:t.id}})},[s("td",fe,[s("div",_e,[e(Z,{class:"mr-2",size:"55"},{default:l(()=>[e(ee,{src:t.image},null,8,["src"])]),_:2},1024),s("div",he,[s("span",null,n(t.first_name)+" "+n(t.last_name),1),s("span",xe,[e(te,{class:"mr-2"},{default:l(()=>[d("mdi-email-outline")]),_:1}),d(n(t.email),1)])])])]),s("td",ve,n(t.position),1),s("td",ge,[s("div",Ve,[s("span",ye,n(t.phone_number),1)])]),s("td",be,n(t.gender),1),s("td",Ce,n(t.address),1)],8,me))),128))])]),_:1}),o(f).length<1?(c(),_("div",ke," No students ")):F("",!0),e(p),Math.ceil(o(i).total/o(i).per_page)>1?(c(),_("div",ze,[s("div",we,"Page "+n(u.value)+" / "+n(Math.ceil(o(i).total/o(i).per_page)),1),e(p),e(ne,{size:"small","total-visible":o(C)?1:5,modelValue:u.value,"onUpdate:modelValue":a[7]||(a[7]=t=>u.value=t),length:Math.ceil(o(i).total/o(i).per_page),color:"primary"},null,8,["total-visible","modelValue","length"])])):F("",!0)]),_:1})]),_:1})]),_:1}),e(ie,{app:"",elevation:"5",class:"d-block py-2 d-md-none d-flex"},{default:l(()=>[e(A,{"prepend-icon":"mdi-plus",size:"small",color:"primary",class:"text-capitalize",onClick:a[8]||(a[8]=t=>r.$router.push({name:"CreateStudent"})),flat:""},{default:l(()=>[d("Add Student")]),_:1}),e(p),s("span",Se,"Total of studens ("+n(o(i).total)+")",1)]),_:1})]),_:1}))}});export{Ge as default};
