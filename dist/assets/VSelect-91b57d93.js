import{e as Q,g as X,V as E}from"./VTextField-2d89fba2.js";import{f as Z}from"./forwardRefs-a4dc6cf3.js";import{p as M,$ as ee,aq as le,an as ae,a as ne,ae as te,r as L,j as O,d as w,s as oe,c as o,N as T,l as P,E as ue,ar as se}from"./index-1f89e21b.js";import{m as ie,u as re,a as ce,V as R}from"./VList-9a4ee12a.js";import{E as de,g as _,f as fe}from"./VCard-c14448d9.js";import{a as ve}from"./VOverlay-9affcd24.js";import{V as me}from"./VMenu-5054fdbc.js";import{V as pe}from"./VCheckboxBtn-d8b388d2.js";import{V as he}from"./VChip-a2a878b8.js";import{u as ye}from"./tag-9205c789.js";const Ve=M({chips:Boolean,closableChips:Boolean,eager:Boolean,hideNoData:Boolean,hideSelected:Boolean,menu:Boolean,menuIcon:{type:ee,default:"$dropdown"},menuProps:{type:Object},multiple:Boolean,noDataText:{type:String,default:"$vuetify.noDataText"},openOnClear:Boolean,valueComparator:{type:Function,default:le},...ie({itemChildren:!1})},"Select"),Ce=M({...Ve(),...ae(Q({modelValue:null}),["validationValue","dirty","appendInnerIcon"]),...de({transition:{component:ve}})},"VSelect"),Te=ne()({name:"VSelect",props:Ce(),emits:{"update:focused":e=>!0,"update:modelValue":e=>!0,"update:menu":e=>!0},setup(e,K){let{slots:a}=K;const{t:N}=te(),D=L(),B=L(),x=O(e,"menu"),f=w({get:()=>x.value,set:l=>{var t;x.value&&!l&&((t=B.value)!=null&&t.Î¨openChildren)||(x.value=l)}}),{items:y,transformIn:U,transformOut:$}=re(e),i=O(e,"modelValue",[],l=>U(se(l)),l=>{const t=$(l);return e.multiple?t:t[0]??null}),m=X(),V=w(()=>i.value.map(l=>y.value.find(t=>e.valueComparator(t.value,l.value))||l)),F=w(()=>V.value.map(l=>l.props.value)),p=oe(!1);let I="",A;const b=w(()=>e.hideSelected?y.value.filter(l=>!V.value.some(t=>t===l)):y.value),h=L();function H(l){e.openOnClear&&(f.value=!0)}function j(){e.hideNoData&&!y.value.length||e.readonly||m!=null&&m.isReadonly.value||(f.value=!f.value)}function q(l){var n,r,c,u;if(e.readonly||m!=null&&m.isReadonly.value)return;["Enter"," ","ArrowDown","ArrowUp","Home","End"].includes(l.key)&&l.preventDefault(),["Enter","ArrowDown"," "].includes(l.key)&&(f.value=!0),["Escape","Tab"].includes(l.key)&&(f.value=!1),l.key==="ArrowDown"?(n=h.value)==null||n.focus("next"):l.key==="ArrowUp"?(r=h.value)==null||r.focus("prev"):l.key==="Home"?(c=h.value)==null||c.focus("first"):l.key==="End"&&((u=h.value)==null||u.focus("last"));const t=1e3;function v(d){const s=d.key.length===1,k=!d.ctrlKey&&!d.metaKey&&!d.altKey;return s&&k}if(e.multiple||!v(l))return;const C=performance.now();C-A>t&&(I=""),I+=l.key.toLowerCase(),A=C;const g=y.value.find(d=>d.title.toLowerCase().startsWith(I));g!==void 0&&(i.value=[g])}function S(l){if(e.multiple){const t=F.value.findIndex(v=>e.valueComparator(v,l.value));if(t===-1)i.value=[...i.value,l];else{const v=[...i.value];v.splice(t,1),i.value=v}}else i.value=[l],f.value=!1}function z(l){var t;(t=h.value)!=null&&t.$el.contains(l.relatedTarget)||(f.value=!1)}function W(){var l;p.value&&((l=D.value)==null||l.focus())}function Y(l){p.value=!0}return ye(()=>{const l=!!(e.chips||a.chip),t=!!(!e.hideNoData||b.value.length||a.prepend||a.append||a["no-data"]),v=i.value.length>0,[C]=E.filterProps(e),g=v||!p.value&&e.label&&!e.persistentPlaceholder?void 0:e.placeholder;return o(E,P({ref:D},C,{modelValue:i.value.map(n=>n.props.value).join(", "),"onUpdate:modelValue":n=>{n==null&&(i.value=[])},focused:p.value,"onUpdate:focused":n=>p.value=n,validationValue:i.externalValue,dirty:v,class:["v-select",{"v-select--active-menu":f.value,"v-select--chips":!!e.chips,[`v-select--${e.multiple?"multiple":"single"}`]:!0,"v-select--selected":i.value.length,"v-select--selection-slot":!!a.selection},e.class],style:e.style,readonly:!0,placeholder:g,"onClick:clear":H,"onMousedown:control":j,onBlur:z,onKeydown:q}),{...a,default:()=>o(T,null,[o(me,P({ref:B,modelValue:f.value,"onUpdate:modelValue":n=>f.value=n,activator:"parent",contentClass:"v-select__content",eager:e.eager,maxHeight:310,openOnClick:!1,closeOnContentClick:!1,transition:e.transition,onAfterLeave:W},e.menuProps),{default:()=>[t&&o(ce,{ref:h,selected:F.value,selectStrategy:e.multiple?"independent":"single-independent",onMousedown:n=>n.preventDefault(),onFocusin:Y},{default:()=>{var n,r,c;return[!b.value.length&&!e.hideNoData&&(((n=a["no-data"])==null?void 0:n.call(a))??o(R,{title:N(e.noDataText)},null)),(r=a["prepend-item"])==null?void 0:r.call(a),b.value.map((u,d)=>{var k;const s=P(u.props,{key:d,onClick:()=>S(u)});return((k=a.item)==null?void 0:k.call(a,{item:u,index:d,props:s}))??o(R,s,{prepend:G=>{let{isSelected:J}=G;return o(T,null,[e.multiple&&!e.hideSelected?o(pe,{key:u.value,modelValue:J,ripple:!1,tabindex:"-1"},null):void 0,u.props.prependIcon&&o(_,{icon:u.props.prependIcon},null)])}})}),(c=a["append-item"])==null?void 0:c.call(a)]}})]}),V.value.map((n,r)=>{var d;function c(s){s.stopPropagation(),s.preventDefault(),S(n)}const u={"onClick:close":c,onMousedown(s){s.preventDefault(),s.stopPropagation()},modelValue:!0,"onUpdate:modelValue":void 0};return o("div",{key:n.value,class:"v-select__selection"},[l?a.chip?o(fe,{key:"chip-defaults",defaults:{VChip:{closable:e.closableChips,size:"small",text:n.title}}},{default:()=>{var s;return[(s=a.chip)==null?void 0:s.call(a,{item:n,index:r,props:u})]}}):o(he,P({key:"chip",closable:e.closableChips,size:"small",text:n.title},u),null):((d=a.selection)==null?void 0:d.call(a,{item:n,index:r}))??o("span",{class:"v-select__selection-text"},[n.title,e.multiple&&r<V.value.length-1&&o("span",{class:"v-select__selection-comma"},[ue(",")])])])})]),"append-inner":function(){var u;for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return o(T,null,[(u=a["append-inner"])==null?void 0:u.call(a,...r),e.menuIcon?o(_,{class:"v-select__menu-icon",icon:e.menuIcon},null):void 0])}})}),Z({isFocused:p,menu:f,select:S},D)}});export{Te as V};
