import{u as le}from"./course-3125e89d.js";import{I as pe}from"./ImageCard-099ce7a7.js";import{a1 as he,p as Re,a as Te,j as Ue,d as B,r as y,s as ze,ai as Ee,o as ae,w as P,i as Me,S as He,c as t,l as R,N as D,aj as ve,ak as Ge,al as Le,Q as te,am as je,f as Oe,h as qe,n as E,v as se,x as ne,L as ie,A as p,B as b,C as l,D as a,E as c,F as n,V as w,G as S,M as q,a3 as J,I as oe,a5 as Je,a6 as Qe,_ as Ke,J as We}from"./index-65b57148.js";import{u as ye,r as A,n as xe}from"./index-11c44734.js";import{I as Xe,h as Q,g as M,i as U,V as Ye}from"./VCard-aef1371f.js";import{V as H}from"./VSpacer-cc7db9a3.js";import{V as re,a as z}from"./VRow-5241ced9.js";import{a as ue,V as T}from"./VList-1ccac915.js";import{m as Ze,b as et,u as tt,a as _e,f as ot,c as lt,d as at,V as we}from"./VTextField-34a01f54.js";import{f as st}from"./forwardRefs-7fe67622.js";import{u as nt}from"./tag-044c96b1.js";import{V as $e}from"./VSelect-17d03543.js";import{V as $}from"./VBtn-ef1515a2.js";import{V as K}from"./VDialog-98379e45.js";import{V as it}from"./VChip-0d82c3a9.js";import{V as rt}from"./VMenu-fa878103.js";import{V as ut}from"./VHover-ddfc3682.js";import{V as ge,a as dt}from"./VTabs-0cf43d40.js";import"./VOverlay-8edd86d4.js";import"./delay-c71925a8.js";/* empty css              */import"./index-521c1f5e.js";import"./VDivider-6dd938d8.js";import"./VCheckboxBtn-d4886256.js";import"./VSelectionControl-259d7468.js";import"./VProgressCircular-82f592c4.js";const ct=()=>{const e=he({name:"",sub_category_id:-1,description:"",number_of_session:1,image:""}),u=ye({name:{required:A},description:{},sub_category_id:{required:A,numeric:xe},number_of_session:{},image:{required:A}},e);return{course:e,$v:u}};const mt=Re({autoGrow:Boolean,autofocus:Boolean,counter:[Boolean,Number,String],counterValue:Function,prefix:String,placeholder:String,persistentPlaceholder:Boolean,persistentCounter:Boolean,noResize:Boolean,rows:{type:[Number,String],default:5,validator:e=>!isNaN(parseFloat(e))},maxRows:{type:[Number,String],validator:e=>!isNaN(parseFloat(e))},suffix:String,modelModifiers:Object,...Ze(),...et()},"VTextarea"),Ce=Te()({name:"VTextarea",directives:{Intersect:Xe},inheritAttrs:!1,props:mt(),emits:{"click:control":e=>!0,"mousedown:control":e=>!0,"update:focused":e=>!0,"update:modelValue":e=>!0},setup(e,m){let{attrs:u,emit:f,slots:o}=m;const i=Ue(e,"modelValue"),{isFocused:d,focus:_,blur:g}=tt(e),s=B(()=>typeof e.counterValue=="function"?e.counterValue(i.value):(i.value||"").toString().length),r=B(()=>{if(u.maxlength)return u.maxlength;if(!(!e.counter||typeof e.counter!="number"&&typeof e.counter!="string"))return e.counter});function W(v,x){var h,C;!e.autofocus||!v||(C=(h=x[0].target)==null?void 0:h.focus)==null||C.call(h)}const de=y(),G=y(),ce=ze(""),L=y(),Ve=B(()=>e.persistentPlaceholder||d.value||e.active);function X(){var v;L.value!==document.activeElement&&((v=L.value)==null||v.focus()),d.value||_()}function ke(v){X(),f("click:control",v)}function De(v){f("mousedown:control",v)}function Se(v){v.stopPropagation(),X(),te(()=>{i.value="",je(e["onClick:clear"],v)})}function Ie(v){var h;const x=v.target;if(i.value=x.value,(h=e.modelModifiers)!=null&&h.trim){const C=[x.selectionStart,x.selectionEnd];te(()=>{x.selectionStart=C[0],x.selectionEnd=C[1]})}}const I=y(),j=y(+e.rows),Y=B(()=>["plain","underlined"].includes(e.variant));Ee(()=>{e.autoGrow||(j.value=+e.rows)});function F(){e.autoGrow&&te(()=>{if(!I.value||!G.value)return;const v=getComputedStyle(I.value),x=getComputedStyle(G.value.$el),h=parseFloat(v.getPropertyValue("--v-field-padding-top"))+parseFloat(v.getPropertyValue("--v-input-padding-top"))+parseFloat(v.getPropertyValue("--v-field-padding-bottom")),C=I.value.scrollHeight,O=parseFloat(v.lineHeight),Z=Math.max(parseFloat(e.rows)*O+h,parseFloat(x.getPropertyValue("--v-input-control-height"))),ee=parseFloat(e.maxRows)*O+h||1/0,k=qe(C??0,Z,ee);j.value=Math.floor((k-h)/O),ce.value=Oe(k)})}ae(F),P(i,F),P(()=>e.rows,F),P(()=>e.maxRows,F),P(()=>e.density,F);let V;return P(I,v=>{v?(V=new ResizeObserver(F),V.observe(I.value)):V==null||V.disconnect()}),Me(()=>{V==null||V.disconnect()}),nt(()=>{const v=!!(o.counter||e.counter||e.counterValue),x=!!(v||o.details),[h,C]=He(u),[{modelValue:O,...Z}]=_e.filterProps(e),[ee]=ot(e);return t(_e,R({ref:de,modelValue:i.value,"onUpdate:modelValue":k=>i.value=k,class:["v-textarea v-text-field",{"v-textarea--prefixed":e.prefix,"v-textarea--suffixed":e.suffix,"v-text-field--prefixed":e.prefix,"v-text-field--suffixed":e.suffix,"v-textarea--auto-grow":e.autoGrow,"v-textarea--no-resize":e.noResize||e.autoGrow,"v-text-field--plain-underlined":Y.value},e.class],style:e.style},h,Z,{centerAffix:j.value===1&&!Y.value,focused:d.value}),{...o,default:k=>{let{isDisabled:N,isDirty:me,isReadonly:Fe,isValid:Ae}=k;return t(lt,R({ref:G,style:{"--v-textarea-control-height":ce.value},onClick:ke,onMousedown:De,"onClick:clear":Se,"onClick:prependInner":e["onClick:prependInner"],"onClick:appendInner":e["onClick:appendInner"],role:"textbox"},ee,{active:Ve.value||me.value,centerAffix:j.value===1&&!Y.value,dirty:me.value||e.dirty,disabled:N.value,focused:d.value,error:Ae.value===!1}),{...o,default:Ne=>{let{props:{class:fe,...Pe}}=Ne;return t(D,null,[e.prefix&&t("span",{class:"v-text-field__prefix"},[e.prefix]),ve(t("textarea",R({ref:L,class:fe,value:i.value,onInput:Ie,autofocus:e.autofocus,readonly:Fe.value,disabled:N.value,placeholder:e.placeholder,rows:e.rows,name:e.name,onFocus:X,onBlur:g},Pe,C),null),[[Ge("intersect"),{handler:W},null,{once:!0}]]),e.autoGrow&&ve(t("textarea",{class:[fe,"v-textarea__sizer"],"onUpdate:modelValue":Be=>i.value=Be,ref:I,readonly:!0,"aria-hidden":"true"},null),[[Le,i.value]]),e.suffix&&t("span",{class:"v-text-field__suffix"},[e.suffix])])}})},details:x?k=>{var N;return t(D,null,[(N=o.details)==null?void 0:N.call(o,k),v&&t(D,null,[t("span",null,null),t(at,{active:e.persistentCounter||d.value,value:s.value,max:r.value},o.counter)])])}:void 0})}),st({},de,G,L)}}),ft={class:"d-flex align-center mb-5"},vt=a("h5",{class:"mb-2"},"Course Image",-1),_t={class:""},gt=a("h5",{class:"mb-2"}," Course name ",-1),pt=a("h5",null," Course description ",-1),ht=a("h5",null,"Select number of session",-1),yt={class:"d-flex flex-wrap mt-2"},xt=a("h5",null,"Select Sub Category",-1),wt={class:"d-flex flex-wrap mt-2"},$t={class:"d-flex mt-5"},Ct={style:{position:"absolute",top:"15px",right:"15px"}},bt=E({__name:"AddCourseDialog",props:["showDialog"],emits:["update:showDialog"],setup(e,{emit:m}){const{mobile:u}=se(),{category:f}=ne(ie()),{$v:o,course:i}=ct(),d=y(!1),_=()=>{if(o.value.$invalid){o.value.$touch();return}d.value=!0,le().store(i.sub_category_id,i).then(()=>{d.value=!1,m("update:showDialog",!1)})};return ae(()=>{o.value.sub_category_id.$model=f.value.sub_categories[0].id||-1}),(g,s)=>(p(),b(K,{"model-value":e.showDialog,"onClick:outside":s[6]||(s[6]=r=>m("update:showDialog",!1)),fullscreen:n(u),width:"650"},{default:l(()=>[t(U,{class:"pa-2 rounded-0 rounded-md-lg",disabled:d.value},{default:l(()=>[t(Q,null,{default:l(()=>[a("h3",ft,[t(M,{class:"mr-2"},{default:l(()=>[c("mdi-plus")]),_:1}),c(" New Course "),t(H)]),t(re,null,{default:l(()=>[t(z,{cols:n(u)?12:4},{default:l(()=>[a("div",null,[vt,a("div",_t,[t(pe,{height:"250",image:n(o).image.$model,"onUpdate:image":s[0]||(s[0]=r=>n(o).image.$model=r)},null,8,["image"]),t(ue,{class:"mt-2 pa-0"},{default:l(()=>[t(T,{class:"text-error text-caption"},{default:l(()=>[c(w(n(J)(n(o).image)),1)]),_:1})]),_:1})])])]),_:1},8,["cols"]),t(z,{cols:n(u)?12:8},{default:l(()=>[a("div",null,[gt,t(we,{modelValue:n(o).name.$model,"onUpdate:modelValue":s[1]||(s[1]=r=>n(o).name.$model=r),"error-messages":n(J)(n(o).name),type:"text",color:"primary",variant:"outlined","single-line":"",density:"compact",class:"mt-2",label:"Name"},null,8,["modelValue","error-messages"])]),a("div",null,[pt,t(Ce,{modelValue:n(o).description.$model,"onUpdate:modelValue":s[2]||(s[2]=r=>n(o).description.$model=r),rows:"1","auto-grow":"",color:"primary",variant:"outlined","single-line":"",density:"compact",class:"mt-2",label:"Description"},null,8,["modelValue"])]),a("div",null,[ht,a("div",yt,[t($e,{modelValue:n(o).number_of_session.$model,"onUpdate:modelValue":s[3]||(s[3]=r=>n(o).number_of_session.$model=r),color:"primary",items:[1,2,3,4,5],variant:"outlined","single-line":"",density:"compact",class:"mt-2",label:"Select"},null,8,["modelValue"])])]),a("div",null,[xt,a("div",wt,[(p(!0),S(D,null,q(n(f).sub_categories,r=>(p(),b($,{onClick:W=>n(o).sub_category_id.$model=r.id,class:"rounded-0 mr-1 mt-1",size:"small",variant:n(o).sub_category_id.$model==r.id?"elevated":"outlined",color:"primary"},{default:l(()=>[c(w(r.name),1)]),_:2},1032,["onClick","variant"]))),256))])])]),_:1},8,["cols"])]),_:1}),a("div",$t,[t($,{class:"mr-1",color:"primary",onClick:_,loading:d.value},{default:l(()=>[c("Add")]),_:1},8,["loading"]),t($,{class:"mr-1",variant:"text",onClick:s[4]||(s[4]=r=>m("update:showDialog",!1))},{default:l(()=>[c("Cancel")]),_:1})])]),_:1}),a("span",Ct,[t($,{flat:"",onClick:s[5]||(s[5]=r=>m("update:showDialog",!1)),icon:"mdi-close"})])]),_:1},8,["disabled"])]),_:1},8,["model-value","fullscreen"]))}}),Vt=e=>{const m=he({name:e.name,sub_category_id:e.sub_category_id,description:e.description,number_of_session:e.number_of_session,image:"",url:e.image}),f=ye({name:{required:A},description:{},sub_category_id:{required:A,numeric:xe},number_of_session:{required:A},image:{}},m);return{edit:m,$v:f}},kt={class:"d-flex align-center mb-5"},Dt=a("h5",{class:"mb-2"},"Course Image",-1),St={class:""},It=a("h5",{class:"mb-2"}," Course name ",-1),Ft=a("h5",null," Course description ",-1),At=a("h5",null,"Select number of session",-1),Nt={class:"d-flex flex-wrap mt-2"},Pt=a("h5",null,"Select Sub Category",-1),Bt={class:"d-flex flex-wrap mt-2"},Rt={class:"d-flex mt-5"},Tt=E({__name:"EditCourseDialog",props:["showDialog","course"],emits:["update:showDialog"],setup(e,{emit:m}){const u=e,{edit:f,$v:o}=Vt(u.course),{category:i}=ne(ie()),d=y(!1),_=()=>{if(o.value.$invalid){o.value.$touch();return}d.value=!0;const g=le();if(f.image&&f.image.type&&f.image.type.includes("image")){g.changeImage(u.course.sub_category_id,u.course.id,f.image).then(()=>{if(o.value.name.$dirty||o.value.sub_category_id.$dirty||o.value.description.$diry||o.value.number_of_session.$dirty){g.update(u.course.sub_category_id,u.course.id,f).then(()=>{d.value=!1,m("update:showDialog",!1)});return}d.value=!1,m("update:showDialog",!1)});return}g.update(u.course.sub_category_id,u.course.id,f).then(()=>{d.value=!1,m("update:showDialog",!1)})};return ae(()=>{o.value.sub_category_id.$model=i.value.sub_categories[0].id||-1}),(g,s)=>(p(),b(K,{"model-value":e.showDialog,"onClick:outside":s[5]||(s[5]=r=>m("update:showDialog",!1)),width:"650"},{default:l(()=>[t(U,{class:"pa-2 rounded-lg",disabled:d.value},{default:l(()=>[t(Q,null,{default:l(()=>[a("h3",kt,[t(M,{class:"mr-2"},{default:l(()=>[c("mdi-plus")]),_:1}),c(" New Course "),t(H)]),t(re,null,{default:l(()=>[t(z,{cols:"4"},{default:l(()=>[a("div",null,[Dt,a("div",St,[t(pe,{image:n(o).image.$model,"onUpdate:image":s[0]||(s[0]=r=>n(o).image.$model=r),url:n(f).url},null,8,["image","url"]),t(ue,null,{default:l(()=>[t(T,{class:"text-error text-caption"},{default:l(()=>[c(w(n(J)(n(o).image)),1)]),_:1})]),_:1})])])]),_:1}),t(z,{cols:"8"},{default:l(()=>[a("div",null,[It,t(we,{modelValue:n(o).name.$model,"onUpdate:modelValue":s[1]||(s[1]=r=>n(o).name.$model=r),"error-messages":n(J)(n(o).name),type:"text",color:"primary",variant:"outlined","single-line":"",density:"compact",class:"mt-2",label:"Name"},null,8,["modelValue","error-messages"])]),a("div",null,[Ft,t(Ce,{modelValue:n(o).description.$model,"onUpdate:modelValue":s[2]||(s[2]=r=>n(o).description.$model=r),rows:"1","auto-grow":"",color:"primary",variant:"outlined","single-line":"",density:"compact",class:"mt-2",label:"Description"},null,8,["modelValue"])]),a("div",null,[At,a("div",Nt,[t($e,{modelValue:n(o).number_of_session.$model,"onUpdate:modelValue":s[3]||(s[3]=r=>n(o).number_of_session.$model=r),color:"primary",items:[1,2,3,4,5],variant:"outlined","single-line":"",density:"compact",class:"mt-2",label:"Select"},null,8,["modelValue"])])]),a("div",null,[Pt,a("div",Bt,[(p(!0),S(D,null,q(n(i).sub_categories,r=>(p(),b($,{onClick:W=>n(o).sub_category_id.$model=r.id,class:"rounded-0 mr-1 mt-1",size:"small",variant:n(o).sub_category_id.$model==r.id?"elevated":"outlined",color:"primary"},{default:l(()=>[c(w(r.name),1)]),_:2},1032,["onClick","variant"]))),256))])])]),_:1})]),_:1}),a("div",Rt,[t($,{class:"mr-1",color:"primary",onClick:_,loading:d.value},{default:l(()=>[c("Save")]),_:1},8,["loading"]),t($,{class:"mr-1",variant:"text",onClick:s[4]||(s[4]=r=>m("update:showDialog",!1))},{default:l(()=>[c("Cancel")]),_:1})])]),_:1})]),_:1},8,["disabled"])]),_:1},8,["model-value"]))}}),Ut={class:"mb-4 text-error d-flex align-center"},zt={class:"pa-0 w-100 d-flex mt-5"},Et=E({__name:"DeleteCourseDialog",props:["showDialog","course"],emits:["update:showDialog"],setup(e,{emit:m}){const u=e;y("");const f=y(!1),o=()=>{f.value=!0,le().delete(u.course.sub_category_id,u.course.id).then(()=>{f.value=!1,m("update:showDialog",!1)})};return(i,d)=>(p(),b(K,{"model-value":e.showDialog,"onClick:outside":d[0]||(d[0]=_=>m("update:showDialog",!1)),width:"450"},{default:l(()=>[t(U,{class:"pa-2 rounded-lg",disabled:f.value},{default:l(()=>[t(Q,null,{default:l(()=>[a("h4",Ut,[t(M,{class:"mr-2"},{default:l(()=>[c("mdi-trash-can")]),_:1}),c(" Delete Course")]),a("p",null,[c("This will permanently delete the course "),a("strong",null,w(e.course.name),1),c(", do you want to delete it?")]),a("div",zt,[t(H),t($,{color:"error",variant:"elevated",onClick:o,loading:f.value},{default:l(()=>[c("Delete")]),_:1},8,["loading"])])]),_:1})]),_:1},8,["disabled"])]),_:1},8,["model-value"]))}}),be=e=>(Je("data-v-eec45fc2"),e=e(),Qe(),e),Mt={class:"text-capitalize text-md-h6 font-weight-medium"},Ht={class:"my-2"},Gt={class:"d-flex flex-column flex-md-row mt-2"},Lt={class:"text-subtitle-md-1"},jt={key:0},Ot=be(()=>a("span",{class:"mt-2 mt-md-0 text-grey-darken-2"},"No attendees",-1)),qt={id:"menu-button"},Jt=be(()=>a("div",{class:"px-5 pb-5"},null,-1)),Qt=E({__name:"CourseCard",props:{course:{}},setup(e){const m=y(!1),u=y(!1),{mobile:f}=se();return(o,i)=>(p(),b(ut,null,{default:l(({props:d,isHovering:_})=>[t(U,R({class:"my-2 rounded-0",elevation:_?0:5},d),{default:l(()=>[t(Ye,{src:o.course.image},null,8,["src"]),t(Q,null,{default:l(()=>[t(it,{class:"mb-2 pa-0",size:n(f)?"small":"default",variant:"text"},{default:l(()=>[c(w(o.course.sub_category.name),1)]),_:1},8,["size"]),a("h3",Mt,w(o.course.name),1),a("p",Ht,w(o.course.description),1),a("div",Gt,[a("h5",Lt,[t(M,null,{default:l(()=>[c("mdi-calendar")]),_:1}),c(" Day "),o.course.number_of_session>1?(p(),S("span",jt,"1 -")):oe("",!0),c(" "+w(o.course.number_of_session),1)]),t(H),oe("",!0),Ot])]),_:1}),a("span",qt,[t(rt,{location:"bottom right"},{activator:l(({props:g})=>[t($,R({icon:"mdi-dots-vertical",variant:"text",size:"small",class:"ma-1",color:"white"},g),null,16)]),default:l(()=>[t(U,{width:"200"},{default:l(()=>[t(ue,null,{default:l(()=>[t(T,{onClick:i[0]||(i[0]=g=>o.$router.push({name:"AddAttendeesCourse",params:{course_id:o.course.id,sub_category_id:o.course.sub_category_id}})),"prepend-icon":"mdi-plus"},{default:l(()=>[c("Add attendees")]),_:1}),t(T,{onClick:i[1]||(i[1]=g=>u.value=!0),"prepend-icon":"mdi-pencil"},{default:l(()=>[c("Edit")]),_:1}),t(T,{onClick:i[2]||(i[2]=g=>m.value=!0),"prepend-icon":"mdi-trash-can"},{default:l(()=>[c("Delete")]),_:1})]),_:1})]),_:1})]),_:2},1024)]),Jt,t(Et,{"show-dialog":m.value,"onUpdate:showDialog":i[3]||(i[3]=g=>m.value=g),course:o.course},null,8,["show-dialog","course"]),t(Tt,{"show-dialog":u.value,"onUpdate:showDialog":i[4]||(i[4]=g=>u.value=g),course:o.course},null,8,["show-dialog","course"])]),_:2},1040,["elevation"])]),_:1}))}});const Kt=Ke(Qt,[["__scopeId","data-v-eec45fc2"]]),Wt={class:"d-flex align-center text-md-h4 font-weight-medium"},Xt={class:"d-flex align-center mt-3"},Yt={class:"mt-5"},Zt={key:0,class:"h-75 d-flex flex-column align-center justify-center"},eo=a("h3",{class:"mb-2"},"No course record",-1),So=E({__name:"Category",setup(e){const{mobile:m}=se(),u=y(!1),{category:f}=ne(ie()),o=y(0),i=B(()=>{if(o.value>0)return f.value.sub_categories.find(d=>d.id==o.value).courses;{const d=[];return f.value.sub_categories.map(_=>d.push(..._.courses)),d}});return(d,_)=>{const g=We("router-view");return p(),S(D,null,[a("h3",Wt,[t(M,{onClick:_[0]||(_[0]=s=>d.$router.push({name:"IndexCourse"}))},{default:l(()=>[c("mdi-chevron-left")]),_:1}),c(" "+w(n(f).name)+" ",1),t(H),t($,{size:n(m)?"x-small":"default",color:"primary","prepend-icon":"mdi-plus",flat:"",onClick:_[1]||(_[1]=s=>u.value=!0)},{default:l(()=>[c("Add course")]),_:1},8,["size"])]),a("div",Xt,[t(dt,{density:"compact","hide-slider":""},{default:l(()=>[t(ge,{class:"rounded-pill mx-1",variant:o.value==0?"elevated":"outlined",color:"primary",onClick:_[2]||(_[2]=s=>o.value=0)},{default:l(()=>[c("All")]),_:1},8,["variant"]),(p(!0),S(D,null,q(n(f).sub_categories,s=>(p(),b(ge,{class:"rounded-pill mx-1",variant:o.value==s.id?"elevated":"outlined",color:"primary",onClick:r=>o.value=s.id,key:s.id},{default:l(()=>[c(w(s.name),1)]),_:2},1032,["variant","onClick"]))),128))]),_:1})]),a("div",Yt,[t(re,null,{default:l(()=>[(p(!0),S(D,null,q(i.value,s=>(p(),b(z,{cols:n(m)?6:3,key:s.id},{default:l(()=>[(p(),b(Kt,{course:s,key:s.id},null,8,["course"]))]),_:2},1032,["cols"]))),128))]),_:1})]),i.value.length<1?(p(),S("div",Zt,[eo,t($,{"prepend-icon":"mdi-plus",flat:"",onClick:_[3]||(_[3]=s=>u.value=!0)},{default:l(()=>[c("Add course")]),_:1})])):oe("",!0),t(K,{fullscreen:n(m),width:"650",persistent:"","model-value":d.$route.name=="AddAttendeesCourse"},{default:l(()=>[t(g)]),_:1},8,["fullscreen","model-value"]),t(bt,{"show-dialog":u.value,"onUpdate:showDialog":_[4]||(_[4]=s=>u.value=s)},null,8,["show-dialog"])],64)}}});export{So as default};
