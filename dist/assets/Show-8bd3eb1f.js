import{d as $,n as W,r as A,x as Y,a2 as S,v as q,w as J,A as c,B as _,C as t,F as e,D as d,c as a,E as o,V as v,I as h,T as ee,a5 as te,a6 as ae,_ as ne,y as le,z as oe,J as ie,X as D,l as se,G as E,K as de}from"./index-df5c3e00.js";import{i as y,g as b,z as ue,h as re,n as ce}from"./VCard-5d4c2059.js";import{V as me}from"./VDivider-5da1d1a6.js";import{a as K,V as g}from"./VList-1315db08.js";import{I as j}from"./ImageCard-6b8982bf.js";import{_ as pe}from"./ManualAttendanceDialog.vue_vue_type_script_setup_true_lang-94c8d59f.js";import{u as _e,_ as fe}from"./useAttedance-bf3f50f7.js";import{a as V,V as F}from"./VRow-7f525726.js";import{V as ve}from"./VMenu-6c39483f.js";import{V as M}from"./VBtn-041272dd.js";import{V as O,a as ge}from"./VTabs-758cc235.js";import{V as he}from"./VDialog-554ec4da.js";import{V as ye}from"./VContainer-4bb91f49.js";import"./tag-c06c36d9.js";import"./index-3b25c727.js";import"./ssrBoot-39327236.js";import"./VOverlay-4618fd3d.js";import"./forwardRefs-3d48cfa0.js";import"./delay-dcf0f73e.js";import"./VHover-6f080d3e.js";import"./course-a0571579.js";import"./main-c41744b1.js";import"./VSpacer-f30f2091.js";import"./VRadio-63de04df.js";import"./VSelectionControl-3c9d191f.js";/* empty css              */import"./VProgressCircular-79f71f1d.js";const X=i=>{const m=$(()=>i.value.attendance&&i.value.attendance.time_in?new Date(i.value.attendance.time_in).toLocaleTimeString("en-us",{minute:"2-digit",hour:"2-digit"}):"--"),r=$(()=>i.value.attendance&&i.value.attendance.time_out?new Date(i.value.attendance.time_out).toLocaleTimeString("en-us",{minute:"2-digit",hour:"2-digit"}):"--"),l=$(()=>i.value.attendance&&i.value.attendance.time_in&&i.value.attendance.time_out?i.value.attendance.work_time+"h":"--"),f=$(()=>i.value.attendance?i.value.attendance.is_absent?"absent":i.value.attendance.late_time?"late":i.value.attendance.is_event?"event":"present":"pending");return{timeIn:m,timeOut:r,workTime:l,status:f}},H=i=>(te("data-v-50d097a4"),i=i(),ae(),i),be={class:"d-flex justify-space-around pt-8 align-center"},ke={id:"toggle-button"},we=H(()=>d("h4",null,"General options",-1)),xe=H(()=>d("h4",null,"Other",-1)),Ce=W({__name:"MobileAttendanceActions",emits:["enter","absent","leave","manual"],setup(i,{emit:m}){A(!1);const r=A(!1),{student:l}=Y(S()),{timeIn:f,timeOut:n,workTime:I,status:U}=X(l),{mobile:T}=q();return J(()=>r.value,()=>{const k=document.getElementById("main");k&&(r.value?k.style.transform="translateY(0)":k.style.transform="translateY(82%)")}),(k,p)=>(c(),_(ee,null,{default:t(()=>[e(T)&&e(l)?(c(),_(y,{key:0,class:"rounded-t-xl",height:"400",elevation:"5",id:"main"},{default:t(()=>[d("div",be,[d("h4",null,[a(b,null,{default:t(()=>[o("mdi-login")]),_:1}),o(" "+v(e(f)),1)]),d("h4",null,[a(b,null,{default:t(()=>[o("mdi-logout")]),_:1}),o(" "+v(e(n)),1)]),d("h4",null,[a(b,null,{default:t(()=>[o("mdi-update")]),_:1}),o(" "+v(e(I)),1)])]),d("span",ke,[a(b,{onClick:p[0]||(p[0]=w=>r.value=!r.value)},{default:t(()=>[o("mdi-drag-horizontal-variant")]),_:1})]),a(me,{class:"mt-5"}),r.value?(c(),_(K,{key:0,class:"pa-5"},{default:t(()=>[we,a(g,{onClick:p[1]||(p[1]=w=>m("enter")),"prepend-icon":"mdi-login",disabled:e(l).attendance&&!!e(l).attendance.time_in||e(l).attendance&&!!e(l).attendance.is_absent||e(l).attendance&&!!e(l).attendance.is_event},{default:t(()=>[o("Enter")]),_:1},8,["disabled"]),a(g,{onClick:p[2]||(p[2]=w=>m("absent")),"prepend-icon":"mdi-close",disabled:e(l).attendance&&!!e(l).attendance.time_in||e(l).attendance&&!!e(l).attendance.is_absent||e(l).attendance&&!!e(l).attendance.is_event},{default:t(()=>[o("Absent")]),_:1},8,["disabled"]),a(g,{onClick:p[3]||(p[3]=w=>m("leave")),"prepend-icon":"mdi-logout",disabled:!e(l).attendance||e(l).attendance&&!!e(l).attendance.time_in&&!!e(l).attendance.time_out||e(l).attendance&&!!e(l).attendance.is_absent||e(l).attendance&&!!e(l).attendance.is_event},{default:t(()=>[o("Leave")]),_:1},8,["disabled"]),xe,a(g,{onClick:p[4]||(p[4]=w=>m("manual")),"prepend-icon":"mdi-book-open-outline"},{default:t(()=>[o("Manual Attendance")]),_:1}),a(g,{"prepend-icon":"mdi-trash-can-outline"},{default:t(()=>[o("Permanent Delete")]),_:1})]),_:1})):h("",!0)]),_:1})):h("",!0)]),_:1}))}});const Ve=ne(Ce,[["__scopeId","data-v-50d097a4"]]),$e=()=>{const i=A(null),m=A(!1),r=le(),l=()=>{if(!i.value)return;S().changeProfile(i.value).then(()=>{r.push({query:{success:"true",message:"Successfully change profile!"}})}),m.value=!1},f=()=>{m.value=!1,i.value=null};return J(()=>i.value,()=>{m.value=!0}),{image:i,applyImage:l,cancelImage:f,showApplyImageDialog:m}},Ae={class:"mt-3 px-5 px-md-0 align-end w-100 d-flex"},Ie={class:"text-md-h3 font-weight-medium"},De={class:"font-weight-regular text-md-subtitle-1 text-capitalize"},Se=d("h4",null,"General options",-1),Te=d("h4",null,"Other",-1),ze={key:0},Pe={key:1},Le={class:"px-5"},Be=d("h4",null,"Time in",-1),Re={class:"px-5"},Ee=d("h4",null,"Time out",-1),Me={class:"px-5"},Oe=d("h4",null,"Work time",-1),Ue={class:"d-flex"},Ne={key:0,class:"text-red text-subtitle-2 d-flex align-center pl-2"},Ge={class:"d-flex"},je={class:"py-5"},gt=W({__name:"Show",setup(i){const m=new Date,{mobile:r}=q(),l=S(),f=A(!1),{student:n,workTimeTotal:I}=Y(S()),{timeIn:U,timeOut:T,workTime:k}=X(n),{applyImage:p,cancelImage:w,image:x,showApplyImageDialog:z}=$e(),P=$(()=>I.value()/n.value.remaining*100),{enter:L,absent:N,leave:G,enterWithPolicy:Q,isLoading:Z,showPolicyConfirmation:B}=_e(n.value);return oe((C,s,R)=>{C.params.student_id!=s.params.student_id&&l.get(C.params.student_id),R()}),(C,s)=>{const R=ie("RouterView");return e(n)?(c(),_(ye,{key:0,class:"h-100 pb-15 pb-md-5",style:{"overflow-x":"hidden"}},{default:t(()=>[a(F,null,{default:t(()=>[e(r)?h("",!0):(c(),_(V,{key:0,cols:"3",class:"d-flex align-end"},{default:t(()=>[(c(),_(j,{height:"250",url:e(n).image,class:"rounded-xl bg-grey-lighten-3 w-100",image:e(x),"onUpdate:image":s[0]||(s[0]=u=>D(x)?x.value=u:null),key:e(n).id},null,8,["url","image"]))]),_:1})),a(V,{class:"px-5 pt-5"},{default:t(()=>[a(y,{class:"d-flex stretch mb-4 bg-transparent",flat:""},{default:t(()=>[e(r)?(c(),_(j,{height:"125",url:e(n).image,class:"rounded-lg bg-grey-lighten-3 w-75",image:e(x),"onUpdate:image":s[1]||(s[1]=u=>D(x)?x.value=u:null),key:e(n).id},null,8,["url","image"])):h("",!0),d("div",Ae,[d("div",null,[d("h1",Ie,v(e(n).first_name+" "+e(n).last_name),1),d("h5",De,v(e(n).position),1)])]),a(ve,{location:"bottom left","close-on-content-click":!1},{activator:t(({props:u})=>[e(r)?h("",!0):(c(),_(M,se({key:0,size:e(r)?"small":"default",class:"mx-2",icon:"mdi-dots-horizontal"},u),null,16,["size"]))]),default:t(()=>[a(y,{width:"325",class:"rounded-lg pa-2 px-4 mr-5"},{default:t(()=>[a(K,null,{default:t(()=>[Se,a(g,{onClick:e(L),"prepend-icon":"mdi-login",disabled:e(n).attendance&&!!e(n).attendance.time_in||e(n).attendance&&!!e(n).attendance.is_absent||e(n).attendance&&!!e(n).attendance.is_event},{default:t(()=>[o("Enter")]),_:1},8,["onClick","disabled"]),a(g,{onClick:e(N),"prepend-icon":"mdi-close",disabled:e(n).attendance&&!!e(n).attendance.time_in||e(n).attendance&&!!e(n).attendance.is_absent||e(n).attendance&&!!e(n).attendance.is_event},{default:t(()=>[o("Absent")]),_:1},8,["onClick","disabled"]),a(g,{onClick:s[2]||(s[2]=u=>e(G)(e(n).id,e(n).attendance.id)),"prepend-icon":"mdi-logout",disabled:!e(n).attendance||e(n).attendance&&!!e(n).attendance.time_in&&!!e(n).attendance.time_out||e(n).attendance&&!!e(n).attendance.is_absent||e(n).attendance&&!!e(n).attendance.is_event},{default:t(()=>[o("Leave")]),_:1},8,["disabled"]),Te,a(g,{"prepend-icon":"mdi-book-open-outline",onClick:s[3]||(s[3]=u=>f.value=!0)},{default:t(()=>[o("Manual Attendance")]),_:1}),a(g,{"prepend-icon":"mdi-trash-can-outline"},{default:t(()=>[o("Permanent Delete")]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),a(ue,{height:"37",color:P.value>=100?"secondary":"primary","model-value":P.value,class:"bg-blue-grey-lighten-1 text-subtitle-1 my-5 text-capitalize font-weight-medium"},{default:t(()=>[P.value<=100?(c(),E("span",ze,"Time Remaining "+v(e(I)())+"/550h",1)):(c(),E("span",Pe," Completed "))]),_:1},8,["color","model-value"]),e(r)?h("",!0):(c(),_(F,{key:0},{default:t(()=>[a(V,null,{default:t(()=>[a(y,{flat:"",class:"pa-5 bg-transparent align-center d-flex rounded-lg"},{default:t(()=>[a(b,{size:"60"},{default:t(()=>[o("mdi-clock-in")]),_:1}),d("div",Le,[Be,d("h3",null,v(e(U)),1)])]),_:1})]),_:1}),a(V,null,{default:t(()=>[a(y,{flat:"",class:"pa-5 bg-transparent align-center d-flex rounded-lg"},{default:t(()=>[a(b,{size:"60"},{default:t(()=>[o("mdi-clock-out")]),_:1}),d("div",Re,[Ee,d("h3",null,v(e(T)),1)])]),_:1})]),_:1}),a(V,null,{default:t(()=>[a(y,{flat:"",class:"pa-5 bg-transparent align-center d-flex rounded-lg"},{default:t(()=>[a(b,{size:"60"},{default:t(()=>[o("mdi-update")]),_:1}),d("div",Me,[Oe,d("h3",Ue,[o(v(e(k))+" ",1),e(n).attendance&&e(n).attendance.policy&&e(n).attendance.time_out?(c(),E("span",Ne," -"+v(parseInt(e(n).attendance.late_time).toFixed(2)||0)+"h ",1)):h("",!0)])])]),_:1})]),_:1})]),_:1}))]),_:1})]),_:1}),d("nav",Ge,[a(ge,{class:"mt-1 mt-md-4"},{default:t(()=>[a(O,{color:"primary",value:"index",onClick:s[4]||(s[4]=u=>C.$router.push({name:"ShowStudent.index"})),class:"text-capitalize"},{default:t(()=>[o("Overview")]),_:1}),a(O,{color:"primary",value:"information",onClick:s[5]||(s[5]=u=>C.$router.push({name:"ShowStudent.information"})),class:"text-capitalize"},{default:t(()=>[o("Information")]),_:1}),a(O,{color:"primary",value:"Courses",onClick:s[6]||(s[6]=u=>C.$router.push({name:"ShowStudent.courses"})),class:"text-capitalize"},{default:t(()=>[o("Courses")]),_:1})]),_:1})]),d("div",je,[e(n)?(c(),_(R,{key:0},{default:t(({Component:u})=>[(c(),_(de(u)))]),_:1})):h("",!0)]),a(fe,{onAllow:e(Q),onDeny:e(L),"show-policy-confirmation":e(B),"onUpdate:showPolicyConfirmation":s[7]||(s[7]=u=>D(B)?B.value=u:null),"is-loading":e(Z)},null,8,["onAllow","onDeny","show-policy-confirmation","is-loading"]),a(pe,{start_at:e(m),key:"now","show-dialog":f.value,"onUpdate:showDialog":s[8]||(s[8]=u=>f.value=u)},null,8,["start_at","show-dialog"]),a(he,{modelValue:e(z),"onUpdate:modelValue":s[9]||(s[9]=u=>D(z)?z.value=u:null),width:"300",persistent:"",scrim:"transparent"},{default:t(()=>[a(y,{class:"pa-5 rounded-lg"},{default:t(()=>[a(re,{class:"text-center"},{default:t(()=>[o(" Do you want to apply it? "),a(ce,{class:"d-flex justify-center mt-1"},{default:t(()=>[a(M,{size:"small",color:"primary",onClick:e(p)},{default:t(()=>[o("Apply")]),_:1},8,["onClick"]),a(M,{size:"small",class:"",onClick:e(w)},{default:t(()=>[o("Cancel")]),_:1},8,["onClick"])]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"]),a(Ve,{onManual:s[10]||(s[10]=u=>f.value=!0),onEnter:e(L),onAbsent:e(N),onLeave:s[11]||(s[11]=u=>e(G)(e(n).id,e(n).attendance.id))},null,8,["onEnter","onAbsent"])]),_:1})):h("",!0)}}});export{gt as default};
